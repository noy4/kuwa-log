(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6021)}])},6021:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(5893),o=t(8520),a=t.n(o),c=t(5503),i=t(6257);c.C6().length||(c.ZF({apiKey:"AIzaSyD0CsHkgnogjmE3HX5wEBbJHgNfJ88F9W4",authDomain:"kuwa-log.firebaseapp.com",projectId:"kuwa-log",storageBucket:"kuwa-log.appspot.com",messagingSenderId:"509974986186",appId:"1:509974986186:web:9d75014d752937d33e2333"}),console.log("Init firebase"));var u=(0,i.ad)(),s=t(7294);function l(e,n,t,r,o,a,c){try{var i=e[a](c),u=i.value}catch(s){return void t(s)}i.done?n(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){l(a,r,o,c,i,"next",e)}function i(e){l(a,r,o,c,i,"throw",e)}c(void 0)}))}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}function g(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var b=t(8485),h=t(8527),m=t(9238),v=t(9116),w=t(5193),y=t(2193),j=t(944),x=t(7536);function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){k(e,n,t[n])}))}return e}var S=function(){var e=function(){var e=(0,s.useState)([]),n=e[0],t=e[1],r=(0,s.useState)(!1),o=r[0],c=r[1],l=(0,s.useState)(!1),d=l[0],b=l[1],h=(0,s.useState)(!1),m=h[0],v=h[1],w=o||d||m,y=f(a().mark((function e(){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),n=(0,i.IO)((0,i.hJ)(u,"kLogs"),(0,i.Xo)("date","desc")),e.next=4,(0,i.PL)(n);case 4:r=e.sent,o=r.docs.map((function(e){return p({},e.data(),{id:e.ref.path,date:e.data().date.toDate()})})),t(o),c(!1);case 8:case"end":return e.stop()}}),e)}))),j=f(a().mark((function e(n){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),r=p({},n,{date:new Date}),e.next=5,(0,i.ET)((0,i.hJ)(u,"kLogs"),r);case 5:o=e.sent,t((function(e){return[p({},r,{id:o.path})].concat(g(e))})),console.log("Doc: ",(0,i.QT)((0,i.JU)(u,o.path))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 13:b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),x=f(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,(0,i.oe)((0,i.JU)(u,n));case 4:t((function(e){return e.filter((function(e){return e.id!==n}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\u524a\u9664\u5931\u6557");case 10:v(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return(0,s.useEffect)((function(){y()}),[]),{kLogs:n,isLoading:w,isFetching:o,isCreating:d,isDeleting:m,createKLog:j,deleteKLog:x}}(),n=e.kLogs,t=e.isLoading,o=e.createKLog,c=e.deleteKLog,l=(0,x.cI)(),d=l.handleSubmit,k=l.register,S=l.reset,E=d((function(e){o(e),S()}));return(0,r.jsxs)(h.W2,{maxW:"sm",children:[(0,r.jsxs)(h.kC,{align:"center",mt:"8",mb:"4",children:[(0,r.jsx)(h.X6,{children:"\u304f\u308f\u30ed\u30b0"}),(0,r.jsx)(h.LZ,{}),t&&(0,r.jsx)(m.$,{})]}),(0,r.jsx)("form",{onSubmit:E,children:(0,r.jsx)(v.II,O({},k("title"),{mb:"4",isRequired:!0}))}),n.map((function(e,n){return(0,r.jsx)("div",{children:(0,r.jsxs)(h.kC,{my:"2",py:"2",align:"end",role:"group",children:[(0,r.jsx)(h.xu,{children:e.title}),(0,r.jsx)(h.LZ,{}),(0,r.jsx)(h.xu,{fontSize:"xs",ml:"auto",children:(0,y.Z)(e.date,{locale:j.Z})}),(0,r.jsx)(w.hU,{"aria-label":"\u524a\u9664",display:"none",variant:"ghost",rounded:"full",size:"xs",ml:"2",_groupHover:{display:"block"},icon:(0,r.jsx)(b.Tw,{}),onClick:function(){return c(e.id)}})]})},n)}))]})}}},function(e){e.O(0,[16,487,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);